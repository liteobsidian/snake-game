(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{"311b":function(e,t,s){},3698:function(e,t,s){},3890:function(e,t,s){"use strict";var a=s("311b"),i=s.n(a);i.a},"8b24":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-page",{staticClass:"q-pa-md"},[s("game")],1)},i=[],r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("q-card",{staticClass:"q-pa-md text-center row gamePageWrapper"},[s("q-dialog",{attrs:{persistent:""},model:{value:e.prompt,callback:function(t){e.prompt=t},expression:"prompt"}},[s("q-card",{staticStyle:{"min-width":"350px"}},[s("q-card-section",[s("div",{staticClass:"text-h6"},[e._v("Enter your Name!")])]),s("q-card-section",{staticClass:"q-pt-none"},[s("q-input",{attrs:{dense:"",autofocus:"",rules:[function(e){return!!e||"Field is required"}]},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.closeDialog(t)}},model:{value:e.userName,callback:function(t){e.userName=t},expression:"userName"}})],1),s("q-card-actions",{staticClass:"text-primary",attrs:{align:"right"}},[s("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel"}}),s("q-btn",{attrs:{flat:"",label:"Save name"},on:{click:e.closeDialog}})],1)],1)],1),s("div",{staticClass:"col-8"},[s("div",{ref:"gameParent",staticClass:"row full-height flex flex-center items-center relative-position"},[s("div",{attrs:{id:"gameContainer"}}),e.game?e._e():s("q-card",{staticClass:"absolute-full welcomeScreen"},[s("h2",{staticClass:"text-primary"},[e._v("Welcome")]),s("h2",{staticClass:"text-positive"},[e._v("to")]),s("h2",{staticClass:"text-deep-orange"},[e._v("Snake-game")])]),e.gamePaused?s("q-card",{staticClass:"absolute-center flex flex-center items-center q-animate--fade moduleScreen",style:e.gameSize},[s("h2",[e._v("PAUSE")])]):e._e(),e.gameWonValue?s("q-card",{staticClass:"column absolute-center flex flex-center items-center q-animate--fade moduleScreen",style:e.gameSize},[s("h2",[e._v("YOU WIN!!!")]),s("h3",[e._v("your score: "+e._s(e.score))])]):e._e(),e.lastGame.finished?s("q-card",{staticClass:"absolute-center flex column flex-center items-center q-animate--fade moduleScreen",style:e.gameSize},[s("h2",[e._v("GAME OVER")]),s("h3",[e._v("your score: "+e._s(e.score))])]):e._e()],1)]),s("right-bar",{staticClass:"q-ml-md col",attrs:{score:e.score,gamePaused:e.gamePaused,isPlaying:e.isPlaying,gameOver:e.lastGame.finished,userName:e.userName},on:{fpsChange:e.changeFps,buttonPressed:e.buttonPressed,startGame:e.preStart,pauseGame:e.pauseGame,playGame:e.playGame,rename:e.rename}})],1)},n=[],o=s("ded3"),l=s.n(o),h=s("4360");class c{constructor(e,t){this.x=e,this.y=t}}class d{constructor(e){this.game=e,this.isFood=!0,this.placeFood()}placeFood(){const e={x:Math.floor(Math.random()*this.game.width),y:Math.floor(Math.random()*this.game.height)};if(void 0!==this.game.snake){const t=this.game.snake.parts;t.forEach((t=>{e.x===t.x&&e.y===t.y?(e.x=Math.floor(Math.random()*this.game.width),e.y=Math.floor(Math.random()*this.game.height)):(this.x=e.x,this.y=e.y)}))}else this.x=e.x,this.y=e.y}update(){this.game.grid.fillGrid(this.x,this.y,this.isFood,!1)}}class m{constructor(e){this.game=e,this.grid=[],this.buildGrid()}buildGrid(){for(let e=0;e<this.game.width;e++){this.grid[e]=[];for(let t=0;t<this.game.height;t++){const s=document.createElement("div"),a=document.createElement("div"),i=(s,a)=>{s.classList.add(a),s.style.width=s.style.height=this.game.size+"px",s.style.left=e*this.game.size+"px",s.style.top=t*this.game.size+"px"};i(a,"back-cell"),i(s,"cell"),this.game.stage.appendChild(a),this.game.stage.appendChild(s),this.grid[e][t]={cell:s,value:!1,isFood:!1,isHead:!1}}}this.game.stage.style.width=this.game.size*this.game.width+"px",this.game.stage.style.height=this.game.size*this.game.width+"px"}fillGrid(e,t,s,a){this.grid[e]&&this.grid[e][t]&&(this.grid[e][t].value=!0,this.grid[e][t].isFood=s,this.grid[e][t].isHead=a)}update(){for(let e=0;e<this.game.width;e++)for(let t=0;t<this.game.height;t++){const s=this.grid[e][t];s.value?(s.cell.classList.add("filled"),s.cell.classList.remove("empty")):(s.cell.classList.add("empty"),s.cell.classList.remove("filled")),s.isFood?s.cell.classList.add("food"):s.cell.classList.remove("food"),s.isHead?s.cell.classList.add("head"):s.cell.classList.remove("head"),s.value=!1}}}class g{constructor(e,t,s,a,i){this.width=e,this.height=t,this.size=s,this.fps=a,this.stage=document.getElementById("gameContainer"),this.scoreValue=0,this.score=0,this.name=i,this.grid=new m(this),this.food=new d(this),this.snake=new p(this,3,3,1),this.finishLoop(),this.startLoop()}startLoop(){return setInterval((()=>{this.update()}),1e3/this.fps),!0}finishLoop(){return u(),!1}update(){this.score=this.scoreValue*this.fps,this.food.update(),this.snake.update(),this.snake.x===this.food.x&&this.snake.y===this.food.y&&(this.food.placeFood(),this.snake.addPart(),this.scoreValue++,144===this.snake.parts.length&&(this.snake.die(),b())),this.grid.update()}}class p{constructor(e,t,s,a){this.game=e,this.x=t,this.y=s,this.xspeed=1,this.yspeed=0,this.canChange=!0,this.parts=[];for(let i=0;i<a;i++)this.parts.push(new c(t--,s))}controller(e){37===e&&0!==this.yspeed&&this.canChange&&(this.canChange=!1,this.xspeed=-1,this.yspeed=0),39===e&&0!==this.yspeed&&this.canChange&&(this.canChange=!1,this.xspeed=1,this.yspeed=0),38===e&&0!==this.xspeed&&this.canChange&&(this.canChange=!1,this.yspeed=-1,this.xspeed=0),40===e&&0!==this.xspeed&&this.canChange&&(this.canChange=!1,this.yspeed=1,this.xspeed=0)}addPart(){const e=this.parts[this.parts.length-1];this.parts.push(new c(e.x,e.y))}update(){this.x+=this.xspeed,this.y+=this.yspeed,this.x<0&&(this.x=0),this.y<0&&(this.y=0),this.x>this.game.width-1&&(this.x=this.game.width-1),this.y>this.game.height-1&&(this.y=this.game.height-1);for(let e=this.parts.length-1;e>=0;e--){const t=this.parts[e];if(void 0!==t){0!==e?(t.x=this.parts[e-1].x,t.y=this.parts[e-1].y,this.x===t.x&&this.y===t.y&&this.die()):(t.x=this.x,t.y=this.y);const s=this.x===this.parts[0].x&&this.y===this.parts[0].y,a=this.x===t.x&&this.y===t.y,i=s&&a;this.game.grid.fillGrid(t.x,t.y,!1,i)}}this.canChange=!0}die(){u();const e=this.game.score,t=this.game.name;y({finished:!0,score:e}),f(e,t)}}function u(){let e=window.setTimeout(null,0);while(e--)window.clearTimeout(e)}function f(e,t){h["a"].dispatch("gameStore/saveScore",{score:e,name:t})}function y(e){h["a"].dispatch("gameStore/toggleGame",e)}function b(){h["a"].dispatch("gameStore/gameWong",!0)}var x=g,v=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wrapper"},[s("q-card",{staticClass:"full-height"},[s("q-tabs",{staticClass:"text-grey",attrs:{dense:"","narrow-indicator":"","active-color":"primary","indicator-color":"primary",align:"justify"},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[s("q-tab",{attrs:{name:"controls",label:"Controls"}}),e.allScores.length?s("q-tab",{attrs:{name:"scores",label:"Scores"}}):e._e()],1),s("q-separator"),s("q-tab-panels",{staticStyle:{height:"calc(100% - 37px)"},attrs:{animated:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[s("q-tab-panel",{staticClass:"controlsBar",attrs:{name:"controls"}},[s("div",[s("div",{staticClass:"userName"},[e.userName?s("div",{staticClass:"text-h5 text-positive margin"},[e._v(e._s(e.userName))]):s("div",{staticClass:"text-h5 text-warning margin"},[e._v("Enter nickname")]),s("q-btn",{staticClass:"redact",attrs:{round:"",color:"positive",icon:"create"},on:{click:e.rename}})],1),s("h4",[e._v("Score: "+e._s(e.score))]),s("div",{staticClass:"q-pa-md q-gutter-sm q-mb-none"},[e.isPlaying&&!e.gameOver||e.gamePaused?s("q-btn",{staticClass:"full-width",attrs:{push:"",color:"deep-orange",label:e.pauseLabel},on:{click:e.toggleGame}}):s("q-btn",{staticClass:"full-width",attrs:{push:"",color:"deep-orange",label:"start"},on:{click:e.startGame}})],1),s("h4",[e._v("Settings")]),s("div",{staticClass:"q-pa-md"},[s("div",{staticClass:"text-subtitle1"},[e._v("Speed: "+e._s(e.currentSpeed))]),s("q-slider",{attrs:{min:1,max:20},on:{change:e.emitSpeed},model:{value:e.currentSpeed,callback:function(t){e.currentSpeed=t},expression:"currentSpeed"}})],1),s("div",{staticClass:"controls-container text-center"},[s("q-btn",{attrs:{padding:"sm",size:"xl",color:"secondary",icon:"arrow_drop_up"},on:{click:function(t){return e.buttonPressed(38)}}}),s("br"),s("q-btn",{attrs:{padding:"sm",size:"xl",color:"secondary",icon:"arrow_left"},on:{click:function(t){return e.buttonPressed(37)}}}),s("q-btn",{attrs:{padding:"sm",size:"xl",color:"secondary",icon:"arrow_drop_down"},on:{click:function(t){return e.buttonPressed(40)}}}),s("q-btn",{attrs:{padding:"sm",size:"xl",color:"secondary",icon:"arrow_right"},on:{click:function(t){return e.buttonPressed(39)}}})],1)])]),s("q-tab-panel",{attrs:{name:"scores"}},[s("q-table",{attrs:{data:e.allScores,"row-key":"index","hide-bottom":""}})],1)],1)],1)],1)},C=[],S=s("2f62"),w={name:"RightBar",props:{score:{type:Number,default:0},gamePaused:{type:Boolean,default:!1},isPlaying:{type:Boolean,default:!1},gameOver:{type:Boolean,default:!1},userName:{type:String,default:"noName"}},data(){return{currentSpeed:5,tab:"controls"}},computed:l()(l()({},Object(S["c"])({allScores:"gameStore/getAllScores"})),{},{pauseLabel(){return this.gamePaused?"play":"pause"}}),methods:{emitSpeed(){this.$emit("fpsChange",this.currentSpeed)},buttonPressed(e){this.$emit("buttonPressed",e)},startGame(){this.$emit("startGame")},toggleGame(){!this.gamePaused&&this.$emit("pauseGame"),this.gamePaused&&this.$emit("playGame")},rename(){this.$emit("rename")}},created(){this.$emit("fpsChange",this.currentSpeed)}},q=w,P=(s("3890"),s("2877")),k=s("f09f"),G=s("429b"),_=s("7460"),N=s("eb85"),L=s("adad"),z=s("823b"),$=s("9c40"),Q=s("c1d0"),F=s("eaac"),E=s("eebe"),O=s.n(E),W=Object(P["a"])(q,v,C,!1,null,"461cd450",null),T=W.exports;O()(W,"components",{QCard:k["a"],QTabs:G["a"],QTab:_["a"],QSeparator:N["a"],QTabPanels:L["a"],QTabPanel:z["a"],QBtn:$["a"],QSlider:Q["a"],QTable:F["a"]});var B={name:"game",components:{RightBar:T},data(){return{fps:0,game:null,isPlaying:!1,gameStarted:!1,gamePaused:!1,userName:null,prompt:!1,isRename:!1}},computed:l()(l()({},Object(S["c"])({getFinishedGame:"gameStore/getFinishedGame",getGameWon:"gameStore/getGameWon",isDarkTheme:"gameStore/isDarkTheme"})),{},{score(){return this.game?this.game.score:0},lastGame(){return{finished:this.getFinishedGame.finished,lastScore:this.getFinishedGame.score}},gameWonValue(){return this.getGameWon},gameCellSize(){const e=this.$refs.gameParent.clientHeight,t=this.$refs.gameParent.clientWidth;return(e<=t?e:t)/12},gameSize(){const e=12*this.gameCellSize;return`width: ${e}px; height: ${e}px;`}}),watch:{isDarkTheme:function(e){this.$q.dark.set(e)}},methods:l()(l()({},Object(S["b"])({toggleGame:"gameStore/toggleGame",gameWon:"gameStore/gameWon"})),{},{changeFps(e){this.fps=e},closeDialog(){this.userName&&(this.prompt=!1,!this.isRename&&this.startGame())},rename(){this.isRename=!0,this.prompt=!0},preStart(){this.userName&&this.startGame(),this.userName||(this.prompt=!0)},startGame(){this.removeOldGame(),this.game=new x(12,12,this.gameCellSize,this.$data.fps,this.$data.userName),this.gameStarted=!0,this.isPlaying=!0,this.gamePaused=!1,this.toggleGame({finished:!1,score:0}),this.gameWon(!1)},pauseGame(){this.game&&(this.isPlaying=this.game.finishLoop(),this.gamePaused=!0)},playGame(){this.game&&(this.isPlaying=this.game.startLoop(),this.gamePaused=!1)},buttonPressed(e){this.gameStarted&&this.game.snake.controller(e)},removeOldGame(){if(this.game){const e=this.game.stage;while(e.hasChildNodes())e.removeChild(e.lastChild)}}}),created(){window.addEventListener("keydown",(e=>{this.buttonPressed(e.keyCode)}))}},M=B,j=(s("bb9a"),s("24e8")),D=s("a370"),R=s("27f9"),V=s("4b7e"),I=s("7f67"),A=Object(P["a"])(M,r,n,!1,null,null,null),H=A.exports;O()(A,"components",{QCard:k["a"],QDialog:j["a"],QCardSection:D["a"],QInput:R["a"],QCardActions:V["a"],QBtn:$["a"]}),O()(A,"directives",{ClosePopup:I["a"]});var J={name:"PageIndex",components:{game:H}},U=J,Y=s("9989"),K=Object(P["a"])(U,a,i,!1,null,null,null);t["default"]=K.exports;O()(K,"components",{QPage:Y["a"]})},bb9a:function(e,t,s){"use strict";var a=s("3698"),i=s.n(a);i.a}}]);